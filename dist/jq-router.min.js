!function(e,t){var r,n={route:{},params:{}};r=function(){var r,a={},o=!0,u={Param_Replacer:"([^/]+)",Param_Matcher:/:([\w\d]+)/g};return a.getCurrentParams=function(){return n.params},a.getCurrentRoute=function(){return n.route},a.getRouteName=function(e){return this.routes[e]},a.getRouteParams=function(t){for(var r=this,n={},a=t.urlExpr.exec(t.url),o=0;o<t.params.length;o++)n[t.params[o]]=a[o+1];return e.extend({},r.paramService.getParams(),n)},a.go=function(e,r){var n=this;return n.paramService.setParams(r),t.location=n.href(e,r),n},a.href=function(e,t){e=e||r;for(var n=this.routes[e],a=n.relativeUrl,o=0;o<n.params.length;o++)a=a.replace(":"+n.params[o],t[n.params[o]]);return a},a.isRouteParamChanged=function(e,t){var r=this;return r.href(e,t)!==r.href(e,r.getCurrentParams())},a.match=function(e){var t,r=this;for(var n in r.routes)r.routes[n].abstract||null===r.routes[n].urlExpr.exec(e)||(t=r.routes[n]);return t},a.onhashchange=function(a){var o,u=this,s=u.match(a);return s?(s.previousUrl=n.route.url||a,s.url=a,o=u.getRouteParams(s),e(t).trigger(u.events.routeMatched,[s,o]),u.renderEngine.processRoute(s,o).then(function(){e(t).trigger(u.events.routeChangeStart,[s,o]),u.renderEngine.render(s,o),n.route=s,n.params=o,e(t).trigger(u.events.routeChangeSuccess,[s,o])})):(e(t).trigger(u.events.routeNotMatched,[s,o]),r&&u.go(r)),u},a.run=function(r,n,a){var u=this;if(o){if(-1===t.location.pathname.lastIndexOf(".")&&"/"!==t.location.pathname.substr(-1))return void(t.location.pathname=t.location.pathname+"/");u.renderEngine.setViewSelector(r),e(t).on("hashchange",function(){u.onhashchange(t.location.hash)}),u.match(t.location.hash)?u.onhashchange(t.location.hash):u.go(n,a),o=!1}return u},a.setData=function(e,t){var r=this;t=void 0===t||t,r.routes={};for(var n in e){var a,o=n.split("."),s=[],c="",i="",h=r.routes[n]=jQuery.extend(!0,{},e[n]);h.name=n,h.segments=[],h.params=[];for(var g=0;g<o.length;g++){s.push(o[g]);var l=s.join(".");c+=e[l].url,h.segments.push(l)}for(;null!==(a=u.Param_Matcher.exec(c));)h.params.push(a[1]);i=new RegExp("^"+c.replace(u.Param_Matcher,u.Param_Replacer)+"$"),h.relativeUrl=c,h.urlExpr=i,h.cache=h.hasOwnProperty("cache")?h.cache:t}return r},a.setDefault=function(e){return r=e,this},a}(),e.router=r}(jQuery,this),function(e,t,r){r.events=Object.freeze({renderViewSuccess:"jqRouter.renderViewSuccess",routeChangeStart:"jqRouter.routeChangeStart",routeChangeSuccess:"jqRouter.routeChangeSuccess",routeMatched:"jqRouter.routeMatched",routeNotMatched:"jqRouter.routeNotsMatched",viewDestroyed:"jqRouter.viewDestroyed"}),r.onRouteBeforeChange=function(r){var n=this;return e(t).on(n.events.routeChangeStart,r),n},r.onRouteChanged=function(r){var n=this;return e(t).on(n.events.routeChangeSuccess,r),n},r.onRouteMatched=function(r){var n=this;return e(t).on(n.events.routeMatched,r),n},r.onRouteNotMatched=function(r){var n=this;return e(t).on(n.events.routeNotMatched,r),n},r.onViewChange=function(r){var n=this;return e(t).on(n.events.renderViewSuccess,r),n},r.onViewDestroyed=function(r){var n=this;return e(t).on(n.events.viewDestroyed,r),n}}(jQuery,window,$.router),function(e,t){t.paramService=function(){var e,t={};return t.setParams=function(t){e=t},t.getParams=function(){return e},t}()}(jQuery,$.router),function(e,t){t.renderEngine=function(){var r,n={},a={};return n.clean=function(r,n){for(var a=this,o=r.length-1;o>=n;o--){var u=t.getRouteName(r[o]);e(window).trigger(t.events.viewDestroyed,[u])}return a},n.getViewTemplate=function(t,r){return e.get({url:t,cache:r,dataType:"html"}).then(function(e){a[t]=e})},n.processRoute=function(r,n){for(var o=this,u=[],s=0;s<r.segments.length;s++){var c=t.getRouteName(r.segments[s]);if(Array.isArray(c.resolve))for(var i=0;i<c.resolve.length;i++){var h=c.resolve[i];"function"==typeof h&&u.push(h(r,n))}else"function"==typeof c.resolve&&u.push(c.resolve(r,n));a[c.templateUrl]&&c.cache||u.push(o.getViewTemplate(c.templateUrl,c.cache))}return e.when.apply(e,u)},n.render=function(o,u){for(var s=t.getCurrentRoute(),c=e.isEmptyObject(s),i=0;i<o.segments.length;i++){var h=t.getRouteName(o.segments[i]),g=e(r+":eq("+i+")");c||(c=o.segments[i]!==s.segments[i]||i+1===o.segments.length||t.isRouteParamChanged(o.segments[i],u))&&n.clean(s.segments,i),c&&(g.html(a[h.templateUrl]),e(window).trigger(t.events.renderViewSuccess,[h,o,u]))}return this},n.setViewSelector=function(e){return r=e,this},n}()}(jQuery,$.router);