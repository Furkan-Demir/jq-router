!function(a,o){var e,s,t,u,l,i={route:{},params:{}};u=!0,l={Param_Replacer:"([^/]+)",Param_Matcher:/:([\w\d]+)/g},(t={}).getCurrentParams=function(){return i.params},t.getCurrentRoute=function(){return i.route},t.getRouteName=function(e){return this.routes[e]},t.getRouteParams=function(e){for(var t={},r=e.urlExpr.exec(e.url),n=0;n<e.params.length;n++)t[e.params[n]]=r[n+1];return a.extend({},this.paramService.getParams(),t)},t.go=function(e,t){var r=this;return r.paramService.setParams(t),o.location=r.href(e,t),r},t.href=function(e,t){e=e||s;for(var r=this.routes[e],n=r.relativeUrl,a=0;a<r.params.length;a++)n=n.replace(":"+r.params[a],t[r.params[a]]);return n},t.isRouteParamChanged=function(e,t){var r=this;return r.href(e,t)!==r.href(e,r.getCurrentParams())},t.match=function(e){var t,r=this;for(var n in r.routes)r.routes[n].abstract||null===r.routes[n].urlExpr.exec(e)||(t=r.routes[n]);return t},t.onhashchange=function(e){var t,r=this,n=r.match(e);return n?(n.previousUrl=i.route.url||e,n.url=e,t=r.getRouteParams(n),a(o).trigger(r.events.routeMatched,[n,t]),r.renderEngine.processRoute(n,t).then(function(){a(o).trigger(r.events.routeChangeStart,[n,t]),r.renderEngine.render(n,t),i.route=n,i.params=t,a(o).trigger(r.events.routeChangeSuccess,[n,t])})):(a(o).trigger(r.events.routeNotMatched,[n,t]),s&&r.go(s)),r},t.run=function(e,t,r){var n=this;if(u){if(-1===o.location.pathname.lastIndexOf(".")&&"/"!==o.location.pathname.substr(-1))return void(o.location.pathname=o.location.pathname+"/");n.renderEngine.setViewSelector(e),a(o).on("hashchange",function(){n.onhashchange(o.location.hash)}),n.match(o.location.hash)?n.onhashchange(o.location.hash):n.go(t,r),u=!1}return n},t.setData=function(e,t){var r=this;for(var n in t=void 0===t||t,r.routes={},e){var a,o,s=n.split("."),u=[],i="",c=r.routes[n]=jQuery.extend(!0,{},e[n]);c.name=n,c.segments=[],c.params=[];for(var h=0;h<s.length;h++){u.push(s[h]);var g=u.join(".");i+=e[g].url,c.segments.push(g)}for(;null!==(o=l.Param_Matcher.exec(i));)c.params.push(o[1]);a=new RegExp("^"+i.replace(l.Param_Matcher,l.Param_Replacer)+"$"),c.relativeUrl=i,c.urlExpr=a,c.cache=c.hasOwnProperty("cache")?c.cache:t}return r},t.setDefault=function(e){return s=e,this},e=t,a.router=e}(jQuery,this),function(t,r,e){e.events=Object.freeze({renderViewSuccess:"jqRouter.renderViewSuccess",routeChangeStart:"jqRouter.routeChangeStart",routeChangeSuccess:"jqRouter.routeChangeSuccess",routeMatched:"jqRouter.routeMatched",routeNotMatched:"jqRouter.routeNotsMatched",viewDestroyed:"jqRouter.viewDestroyed"}),e.onRouteBeforeChange=function(e){return t(r).on(this.events.routeChangeStart,e),this},e.onRouteChanged=function(e){return t(r).on(this.events.routeChangeSuccess,e),this},e.onRouteMatched=function(e){return t(r).on(this.events.routeMatched,e),this},e.onRouteNotMatched=function(e){return t(r).on(this.events.routeNotMatched,e),this},e.onViewChange=function(e){return t(r).on(this.events.renderViewSuccess,e),this},e.onViewDestroyed=function(e){return t(r).on(this.events.viewDestroyed,e),this}}(jQuery,window,$.router),function(e,t){var r,n;$.router.paramService=((n={}).setParams=function(e){r=e},n.getParams=function(){return r},n)}(jQuery),function(u,i){var c,h,g;i.renderEngine=(g={},(h={}).clean=function(e,t){for(var r=e.length-1;t<=r;r--){var n=i.getRouteName(e[r]);u(window).trigger(i.events.viewDestroyed,[n])}return this},h.getViewTemplate=function(t,e){return u.get({url:t,cache:e,dataType:"html"}).then(function(e){g[t]=e})},h.processRoute=function(e,t){for(var r=[],n=0;n<e.segments.length;n++){var a=i.getRouteName(e.segments[n]);if(Array.isArray(a.resolve))for(var o=0;o<a.resolve.length;o++){var s=a.resolve[o];"function"==typeof s&&r.push(s(e,t))}else"function"==typeof a.resolve&&r.push(a.resolve(e,t));g[a.templateUrl]&&a.cache||r.push(this.getViewTemplate(a.templateUrl,a.cache))}return u.when.apply(u,r)},h.render=function(e,t){for(var r=i.getCurrentRoute(),n=u.isEmptyObject(r),a=0;a<e.segments.length;a++){var o=i.getRouteName(e.segments[a]),s=u(c+":eq("+a+")");n||(n=e.segments[a]!==r.segments[a]||a+1===e.segments.length||i.isRouteParamChanged(e.segments[a],t))&&h.clean(r.segments,a),n&&(s.html(g[o.templateUrl]),u(window).trigger(i.events.renderViewSuccess,[o,e,t]))}return this},h.setViewSelector=function(e){return c=e,this},h)}(jQuery,$.router);